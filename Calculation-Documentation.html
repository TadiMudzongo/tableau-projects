<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-55M4ZB6GXN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-55M4ZB6GXN');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chicago VRD Calculations Documentation | Tadiwanashe Mudzongo</title>
  <link rel="stylesheet" href="assets/css/main.css" />
  <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  
  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body class="is-preload">
  <style>
  /* Image Section */
  #springboks-image {
    margin: 0rem 0;
  }

  #springboks-image .image-stack {
    width: 100%;
  }

  #springboks-image .image-stack img {
    width: 100%;
    height: auto;
    max-height: 500px;
    object-fit: contain;
    display: block;
    border-radius: 0;
    box-shadow: none;
  }

  /* Content Section */
  #springboks-content {
    padding: 4rem 2rem;
  }

  #springboks-content .content {
    max-width: 1500px;
    margin: 0 auto;
    text-align: left;
  }

  @media (min-width: 769px) {
    #springboks-content .content {
      margin-left: 0;
    }
  }

  @media (max-width: 768px) {
    #springboks-content {
      padding: 2rem 1rem;
    }

    #springboks-content .content {
      margin-left: auto;
      margin-right: auto;
    }
  }

  
  @media screen and (min-width: 768px) {
    #data-enrichment .content {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }


</style>

<div id="wrapper" class="divided">

  <!-- Content Section -->
  <div id="wrapper" class="divided">

  <!-- Content Section -->
  <section id="springboks-content" style="display: flex; flex-direction: column; align-items: stretch;">
    <div class="content" style="width: 100%; max-width: none; flex: 1;">
      <h2>Chicago Violence Reduction Dashboard | <span style="color: #898989;">Calculation Dictionary</span></h2>
      <p>
        This page provides technical documentation for key calculations and metrics used in the Tableau dashboard.
        The goal is to support transparency, clarity, and reproducibility of the visualizations.
        All formulas are based on publicly available data, and we encourage users to review the 
        <a href="https://dev.socrata.com/foundry/data.cityofchicago.org/gumc-mgzr" target="_blank" rel="noopener noreferrer">source dataset documentation</a>
        if they'd like to recreate the analysis.
      </p>

      <h3>Document Sections</h3>
      <ul>
        <li>Weekly Rate Denominator Logic</li>
        <li>Daily Rate Denominator Logic</li>
        <li>Annualization of rates</li>
      </ul>

      <ul class="actions">
        <li><a href="Chicago-Shooting-Incidents-Dashboard-Guide.html" class="button">View User Guide</a></li>
      </ul>
    </div>
  </section>
</div>


  <!-- Calculation Section 1 -->
<!-- Calculation Section: Per Week Denominator -->
<section id="springboks-content" style="display: flex; flex-direction: column; align-items: stretch;">
  <div class="content">
    <h2>Per Week Denominator Logic</h2>
    <p>
      Several metrics in this dashboard are normalized by the number of weeks in the selected date range. This enables fair comparisons between areas and groups that may span different time periods.
    </p>

        <p>
      This denominator is used in the following metrics:
      <ul>
        
        <li>Incidents per Week</li>
        <li>Victimizations per Week</li>
        <li>Homicides per Week</li>
      </ul>
    </p>
    <p>
      Each of these metrics divides the total count of incidents by the number of weeks in the filtered date range, enabling standardized comparisons even when different groups cover different time spans.
    </p>
    
    <p>
      The denominator for all “per week” metrics is calculated as:
    </p>
    <p style="font-size: 1.2rem;">
      $$
      \text{Weeks} = \frac{\text{MAX(Date)} - \text{MIN(Date)}}{7}
      $$
    </p>
    <p>
      In Tableau, we calculate this using a Level of Detail (LOD) expression to ensure the time span is fixed across all formatting and groupings:
    </p>
    <pre><code>
SUM((
  DATEDIFF('day',
    {EXCLUDE [Community Area] : MIN([Date])},
    {EXCLUDE [Community Area] : MAX([Date])}
  ) / 7.0
))
    </code></pre>

  </div>
</section>


  <!-- Placeholder Section 2 -->
<!-- Calculation Section: Per Day Denominator -->
<section id="springboks-content" style="display: flex; flex-direction: column; align-items: stretch;">
  <div class="content">
    <h2>Per Day Denominator Logic</h2>
    <p>
      Some metrics in the dashboard are normalized by the number of days in the filtered date range. This allows you to compare areas and groups based on average daily activity, regardless of how long the time window is.
    </p>

        <p>
      This denominator is used in the following metrics:
      <ul>
        <li>Incidents per Day</li>
        <li>Victimizations per Day</li>
        <li>Homicides per Day</li>
      </ul>
    </p>
    <p>
      These metrics take the total count of incidents and divide it by the number of days in the current view, producing a normalized daily average.
    </p>

    
    <p>
      The denominator for these “per day” metrics is calculated as:
    </p>
    <p style="font-size: 1.2rem;">
      $$
      \text{Days} = (\text{MAX(Date)} - \text{MIN(Date)}) + 1
      $$
    </p>
    <p>
      The +1 ensures both endpoints of the date range are included — for example, Jan 1 to Jan 1 is treated as 1 day, not 0.
    </p>
    <p>
      In Tableau, this is implemented using a Level of Detail (LOD) expression to fix the date span across all groupings:
    </p>
    <pre><code>
SUM(
  DATEDIFF('day',
    {EXCLUDE [Community Area] : MIN([Date])},
    {EXCLUDE [Community Area] : MAX([Date])}
  ) + 1
)
    </code></pre>

  </div>
</section>


<!-- Calculation Section: Annualization of Rates -->
<section id="springboks-content" style="display: flex; flex-direction: column; align-items: stretch;">
  <div class="content">
    <h2>Annualization of Rates (Per 100 000 People)</h2>
    <p>
      To compare incident rates fairly across different time periods, several metrics in this dashboard are annualized and normalized per 100,000 people. This process adjusts counts from the selected date range to an estimated yearly rate.
    </p>

    <p>
      The following metrics use this annualization method:
      <ul>
        <li>Incidents per 100 000</li>
        <li>Victimizations per 100 000</li>
        <li>Homicides per 100 000</li>
      </ul>
    </p>

    <p>
      These metrics divide the count of incidents by the population, multiply by 100,000, and then divide by the fraction of the year represented by the selected date range. The divisor uses 365 days exactly when the range is one year; otherwise, it uses 365.25 to account for leap years.
    </p>

    <p style="font-size: 1.2rem;">
        <strong>Example (Incidents per 100 000):</strong>
      $$
      \text{Annualized Rate per 100 000} =
      \frac{\text{Count of Incidents}}{\text{Population}} \times 100 000
      \div \left( \frac{\text{MAX(Date)} - \text{MIN(Date)}}{d} \right)
      $$
      <br/>
      where
      $$
      d = \begin{cases}
      365 & \text{if date range = 365 days} \\
      365.25 & \text{otherwise}
      \end{cases}
      $$
    </p>

    <p>
      In Tableau, this is implemented with the following calculation:
    </p>

    <pre><code>
[Count of Incidents] / SUM([2022 Population])
* 100000 /
SUM(
  DATEDIFF(
    'day',
    {EXCLUDE [Community Area] : MIN([Date])},
    {EXCLUDE [Community Area] : MAX([Date])}
  ) /
  IF DATEDIFF(
       'day',
       {EXCLUDE [Community Area] : MIN([Date])},
       {EXCLUDE [Community Area] : MAX([Date])}
     ) = 365 THEN 365
  ELSE 365.25
  END
)
    </code></pre>
  </div>
</section>



</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>

